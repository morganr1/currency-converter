{"ast":null,"code":"var _jsxFileName = \"/Users/reggiemorgan/Dev2020/LeasePlan/lease-plan-currency-converter/src/components/converter/converter.web.js\";\nimport React, { Component } from 'react';\nimport { fetchLatestCurrencies } from '../../api/currency.api';\nimport CurrencyDropdown from '../currencyDropdown/currencyDropdown.web';\nimport TextField from '../textField/textField.web';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport fx from 'money';\nimport './converter.scss';\nfx.base = 'EUR';\n\nclass Converter extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currencies: [],\n      result: null,\n      fromCurrency: \"EUR\",\n      toCurrency: \"GBP\",\n      amount: 1\n    };\n\n    this.componentDidMount = async () => {\n      // A default while the api request returns values\n      const currencyArray = [\"EUR\"];\n      let rates = await fetchLatestCurrencies();\n      fx.rates = rates;\n\n      for (const key in rates) {\n        currencyArray.push(key);\n      }\n\n      currencyArray.sort();\n      this.setState({\n        currencies: currencyArray\n      });\n    };\n\n    this.handleConversion = () => {\n      if (this.state.fromCurrency !== this.state.toCurrency) {\n        const convertedResult = fx(this.state.amount).from(this.state.fromCurrency).to(this.state.toCurrency);\n        this.setState({\n          result: convertedResult\n        });\n      } else {\n        this.setState({\n          result: \"You cant convert the same currency!\"\n        });\n      }\n    };\n\n    this.handleCurrencySelect = ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      if (name === \"From\") {\n        this.setState({\n          fromCurrency: value\n        });\n      }\n\n      if (name === \"To\") {\n        this.setState({\n          toCurrency: value\n        });\n      }\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // Once currencies are loaded - do an initial conversion to be shown on first render\n    if (prevState.currencies !== this.state.currencies) {\n      this.handleConversion();\n    } // when the user changes the 'To' currency, automatically convert\n\n\n    if (prevState.toCurrency !== this.state.toCurrency) {\n      this.handleConversion();\n    }\n  }\n\n  render() {\n    const _this$state = this.state,\n          fromCurrency = _this$state.fromCurrency,\n          toCurrency = _this$state.toCurrency,\n          currencies = _this$state.currencies,\n          result = _this$state.result,\n          amount = _this$state.amount;\n    return React.createElement(Paper, {\n      style: {\n        padding: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"converter-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      color: \"secondary\",\n      className: \"title-text\",\n      variant: \"h4\",\n      component: \"h4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Currency Converter\"), React.createElement(Typography, {\n      className: \"result-text\",\n      color: \"textSecondary\",\n      variant: \"h4\",\n      component: \"h4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, result > 0 ? result.toLocaleString(undefined, {\n      style: \"currency\",\n      currency: toCurrency\n    }).split(\" \")[0] : result), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'row',\n        textAlign: 'center',\n        justifyContent: 'center',\n        alignItems: 'baseline'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(CurrencyDropdown, Object.assign({\n      currencies,\n      currentCurrency: fromCurrency,\n      selectCurrency: this.handleCurrencySelect,\n      label: 'From'\n    }, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    })), React.createElement(CurrencyDropdown, Object.assign({\n      currencies,\n      currentCurrency: toCurrency,\n      selectCurrency: this.handleCurrencySelect,\n      label: 'To'\n    }, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        margin: '0 auto',\n        minWidth: 257\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(TextField, Object.assign({\n      initialAmount: amount,\n      setAmount: e => this.setState({\n        amount: e.target.value\n      })\n    }, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })), React.createElement(Button, {\n      onClick: this.handleConversion,\n      variant: \"contained\",\n      color: \"secondary\",\n      startIcon: React.createElement(CachedIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Convert\"))));\n  }\n\n}\n\nexport default Converter;","map":{"version":3,"sources":["/Users/reggiemorgan/Dev2020/LeasePlan/lease-plan-currency-converter/src/components/converter/converter.web.js"],"names":["React","Component","fetchLatestCurrencies","CurrencyDropdown","TextField","Typography","Button","Paper","CachedIcon","fx","base","Converter","state","currencies","result","fromCurrency","toCurrency","amount","componentDidMount","currencyArray","rates","key","push","sort","setState","handleConversion","convertedResult","from","to","handleCurrencySelect","target","value","name","componentDidUpdate","prevProps","prevState","render","padding","toLocaleString","undefined","style","currency","split","display","flexDirection","textAlign","justifyContent","alignItems","currentCurrency","selectCurrency","label","margin","minWidth","initialAmount","setAmount","e"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { fetchLatestCurrencies } from '../../api/currency.api';\nimport CurrencyDropdown from '../currencyDropdown/currencyDropdown.web';\nimport TextField from '../textField/textField.web';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport fx from 'money';\nimport './converter.scss';\n\nfx.base = 'EUR';\n\nclass Converter extends Component {\n    state = {\n        currencies: [],\n        result: null,\n        fromCurrency: \"EUR\",\n        toCurrency: \"GBP\",\n        amount: 1,\n    };\n\n    componentDidMount = async () => {\n        // A default while the api request returns values\n        const currencyArray = [\"EUR\"];\n        let rates = await fetchLatestCurrencies();\n        fx.rates = rates;\n        for (const key in rates) {\n            currencyArray.push(key);\n        }\n        currencyArray.sort();\n        this.setState({ currencies: currencyArray })\n    };\n\n    componentDidUpdate(prevProps, prevState) {\n        // Once currencies are loaded - do an initial conversion to be shown on first render\n        if(prevState.currencies !== this.state.currencies) {\n            this.handleConversion();\n        }\n        // when the user changes the 'To' currency, automatically convert\n        if(prevState.toCurrency !== this.state.toCurrency) {\n            this.handleConversion();\n        }\n\n    }\n\n\n    handleConversion = () => {\n        if (this.state.fromCurrency !== this.state.toCurrency) {\n            const convertedResult = fx(this.state.amount).from(this.state.fromCurrency).to(this.state.toCurrency);\n            this.setState({ result: convertedResult });\n        } else {\n            this.setState({ result: \"You cant convert the same currency!\" })\n        }\n    };\n\n    handleCurrencySelect = ({ target: { value, name }}) => {\n        if (name === \"From\") {\n            this.setState({ fromCurrency: value })\n        }\n        if (name === \"To\") {\n            this.setState({ toCurrency: value });\n        }\n    };\n\n    render() {\n        const { fromCurrency, toCurrency, currencies, result, amount } = this.state;\n        return (\n            <Paper style={{ padding: 20 }}>\n            <div className=\"converter-container\">\n                    <Typography color=\"secondary\"  className=\"title-text\" variant=\"h4\" component=\"h4\">Currency Converter</Typography>\n                    <Typography className=\"result-text\"  color=\"textSecondary\" variant=\"h4\" component=\"h4\">\n                        {result > 0 ? result.toLocaleString(undefined, { style: \"currency\", currency: toCurrency }).split(\" \")[0] : result}\n                    </Typography>\n                        <div style={{ display: 'flex', flexDirection: 'row', textAlign: 'center', justifyContent: 'center', alignItems: 'baseline' }}>\n                            <CurrencyDropdown {...{ currencies, currentCurrency: fromCurrency, selectCurrency: this.handleCurrencySelect, label: 'From' }}/>\n                            <CurrencyDropdown {...{ currencies, currentCurrency: toCurrency, selectCurrency: this.handleCurrencySelect, label: 'To' }}/>\n                        </div>\n                        <div style={{ display: 'flex', flexDirection: 'column', margin: '0 auto', minWidth: 257 }}>\n                            <TextField {...{ initialAmount: amount, setAmount: e => this.setState({ amount: e.target.value }) }} />\n                            <Button\n                                onClick={this.handleConversion}\n                                variant=\"contained\"\n                                color=\"secondary\"\n                                startIcon={<CachedIcon />}\n                            >\n                                Convert\n                            </Button>\n                        </div>\n            </div>\n            </Paper>\n        )\n    }\n}\n\nexport default Converter;\n"]},"metadata":{},"sourceType":"module"}